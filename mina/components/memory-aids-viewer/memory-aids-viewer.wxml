<!-- components/memory-aids-viewer/memory-aids-viewer.wxml -->
<view class="memory-aids-viewer" wx:if="{{visible && aids}}">
  <!-- å¤´éƒ¨æ ‡ç­¾åˆ‡æ¢ -->
  <view class="tabs-container">
    <view class="tabs-list">
      <view 
        class="tab-item {{currentTab === item.key ? 'active' : ''}}"
        wx:for="{{tabs}}"
        wx:key="key"
        data-tab="{{item.key}}"
        bindtap="switchTab"
      >
        <text class="tab-icon">{{item.icon}}</text>
        <text class="tab-label">{{item.label}}</text>
      </view>
    </view>
  </view>

  <!-- æ€ç»´å¯¼å›¾å†…å®¹ -->
  <view class="tab-content" wx:if="{{currentTab === 'mindmap'}}">
    <view class="mindmap-container" wx:if="{{aids.mindMap}}">
      <view class="mindmap-preview" bindtap="previewMindMap">
        <view class="mindmap-node root-node">
          <text class="node-text">{{aids.mindMap.label}}</text>
        </view>
        <view class="mindmap-children" wx:if="{{aids.mindMap.children}}">
          <view 
            class="mindmap-node child-node"
            wx:for="{{aids.mindMap.children}}"
            wx:key="id"
          >
            <text class="node-text">{{item.label}}</text>
          </view>
        </view>
        <view class="preview-tip">
          <text>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´æ€ç»´å¯¼å›¾</text>
        </view>
      </view>
    </view>
    <view class="empty-state" wx:else>
      <text class="empty-text">æš‚æ— æ€ç»´å¯¼å›¾æ•°æ®</text>
    </view>
  </view>

  <!-- è®°å¿†å£è¯€å†…å®¹ -->
  <view class="tab-content" wx:if="{{currentTab === 'mnemonics'}}">
    <view class="mnemonics-list" wx:if="{{mnemonicsWithIcons && mnemonicsWithIcons.length > 0}}">
      <view 
        class="mnemonic-item"
        wx:for="{{mnemonicsWithIcons}}"
        wx:key="id"
      >
        <view class="mnemonic-header">
          <view class="mnemonic-title">
            <text class="type-icon">{{item.typeIcon}}</text>
            <text class="title-text">{{item.title}}</text>
          </view>
          <view class="mnemonic-actions">
            <view class="action-btn" data-content="{{item.content}}" bindtap="onCopy">
              <text class="action-icon">ğŸ“‹</text>
            </view>
            <view class="action-btn" data-type="mnemonic" data-content="{{item}}" bindtap="onShare">
              <text class="action-icon">ğŸ“¤</text>
            </view>
          </view>
        </view>
        <view class="mnemonic-content">
          <text class="content-text">{{item.content}}</text>
        </view>
        <view class="mnemonic-explanation" wx:if="{{item.explanation}}">
          <text class="explanation-label">è¯´æ˜ï¼š</text>
          <text class="explanation-text">{{item.explanation}}</text>
        </view>
      </view>
    </view>
    <view class="empty-state" wx:else>
      <text class="empty-text">æš‚æ— è®°å¿†å£è¯€æ•°æ®</text>
    </view>
  </view>

  <!-- æ„Ÿå®˜è”æƒ³å†…å®¹ -->
  <view class="tab-content" wx:if="{{currentTab === 'sensory'}}">
    <view class="sensory-list" wx:if="{{sensoryWithIcons && sensoryWithIcons.length > 0}}">
      <view 
        class="sensory-item"
        wx:for="{{sensoryWithIcons}}"
        wx:key="id"
      >
        <view class="sensory-header">
          <view class="sensory-title">
            <text class="type-icon">{{item.typeIcon}}</text>
            <text class="title-text">{{item.title}}</text>
          </view>
          <view class="sensory-actions">
            <view class="action-btn" bindtap="onCopy">
              <text class="action-icon">ğŸ“‹</text>
            </view>
            <view class="action-btn" data-type="sensory" data-content="{{item}}" bindtap="onShare">
              <text class="action-icon">ğŸ“¤</text>
            </view>
          </view>
        </view>
        
        <!-- è§†è§‰è”æƒ³ -->
        <view class="sensory-content" wx:if="{{item.type === 'visual'}}">
          <view 
            class="visual-item"
            wx:for="{{item.content}}"
            wx:for-item="visual"
            wx:key="dynasty"
          >
            <view class="visual-header">
              <text class="visual-emoji">{{visual.image}}</text>
              <text class="visual-dynasty">{{visual.dynasty}}</text>
            </view>
            <text class="visual-association">{{visual.association}}</text>
            <view class="visual-actions">
              <view class="generate-btn" data-content="{{visual.association}}" data-type="{{visual.dynasty}}" bindtap="generateImage">
                <text class="btn-icon">ğŸ–¼ï¸</text>
                <text class="btn-text">ç”Ÿæˆå›¾ç‰‡</text>
              </view>
            </view>
          </view>
        </view>
        
        <!-- å¬è§‰è”æƒ³ -->
        <view class="sensory-content" wx:if="{{item.type === 'auditory'}}">
          <view 
            class="auditory-item"
            wx:for="{{item.content}}"
            wx:for-item="auditory"
            wx:key="dynasty"
          >
            <view class="auditory-header">
              <text class="auditory-dynasty">{{auditory.dynasty}}</text>
            </view>
            <text class="auditory-sound">å£°éŸ³ï¼š{{auditory.sound}}</text>
            <text class="auditory-rhythm">èŠ‚å¥ï¼š{{auditory.rhythm}}</text>
            <view class="auditory-actions">
              <view class="generate-btn" data-content="{{auditory.sound}}" data-type="{{auditory.dynasty}}" bindtap="generateAudio">
                <text class="btn-icon">ğŸµ</text>
                <text class="btn-text">ç”ŸæˆéŸ³é¢‘</text>
              </view>
            </view>
          </view>
        </view>
        
        <!-- è§¦è§‰è”æƒ³ -->
        <view class="sensory-content" wx:if="{{item.type === 'tactile'}}">
          <view 
            class="tactile-item"
            wx:for="{{item.content}}"
            wx:for-item="tactile"
            wx:key="dynasty"
          >
            <view class="tactile-header">
              <text class="tactile-dynasty">{{tactile.dynasty}}</text>
            </view>
            <text class="tactile-texture">è´¨æ„Ÿï¼š{{tactile.texture}}</text>
            <text class="tactile-feeling">æ„Ÿå—ï¼š{{tactile.feeling}}</text>
          </view>
        </view>
      </view>
    </view>
    <view class="empty-state" wx:else>
      <text class="empty-text">æš‚æ— æ„Ÿå®˜è”æƒ³æ•°æ®</text>
    </view>
  </view>
</view>